<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>InmueblesMX</title>
    <style>
      .sandbox-box {
        min-height: 60vh; display:flex; align-items:center; justify-content:center;
        padding:16px; background:#fafafa; border:1px solid #e5e7eb; border-radius:12px;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
        color:#374151; text-align:center;
      }
      .sandbox-msg { font-weight:600; margin-bottom:6px; }
      .sandbox-sub { font-size:13px; color:#555; line-height:1.5 }
      code.sbx { background:#fff; border:1px solid #eee; border-radius:6px; padding:4px 8px; display:inline-block }
    </style>
  </head>
  <body>
    <div id="app-root"></div>

    <!-- CARGA CONDICIONAL: si estamos en sandbox, NO importamos la SPA; si no, import('/client/main.tsx') -->
    <script type="module">
      const root = document.getElementById('app-root') || document.body;
      let isSandbox = false;
      try { isSandbox = window.self !== window.top; } catch { isSandbox = true; }

      if (isSandbox) {
        root.innerHTML = `
          <div class="sandbox-box">
            <div>
              <div class="sandbox-msg">Vista previa deshabilitada en el editor</div>
              <div class="sandbox-sub">
                El sandbox de Builder bloquea la ejecución de aplicaciones SPA (React/Vite).<br/>
                Abre la <b>URL pública</b> para ver formularios, lista y mapa.<br/><br/>
                <code class="sbx">/search?mock=1</code>
              </div>
            </div>
          </div>
        `;
      } else {
        // Vite transformará este import dinámico a los assets de producción en el build.
        import('/client/main.tsx');
      }
    </script>
  </body>
</html>
